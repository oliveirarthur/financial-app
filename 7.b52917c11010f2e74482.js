(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"99Un":function(t,e,i){"use strict";i.r(e),i.d(e,"HomeModule",function(){return g});var s=i("ofXK"),n=i("3Pt+"),a=i("a0Xn"),r=i("mrSG"),o=i("AytR"),c=i("wd/R"),l=i("JX91"),h=i("Kj3r"),u=i("eIep"),p=i("fXoL"),d=i("E2ls"),m=i("ej43");let f=(()=>{class t{constructor(t,e,i){this.formBuilder=t,this.installmentService=e,this.authenticationService=i,this.filters=this.formBuilder.group({period:this.formBuilder.control(10,[n.n.min(1),n.n.max(10)]),periodType:"months"}),this.chart=new a.a({chart:{type:"columnrange",inverted:!0},title:{text:"Proje\xe7\xe3o de faturas"},xAxis:{categories:["teste parcelamento"],title:{text:"Nome do parcelamento"}},yAxis:{categories:["2021-01","2021-02"],title:{text:"m\xeas/ano de fechamento da fatura"},labels:{formatter:({value:t})=>c(t).format("MM/YYYY")}},tooltip:{enabled:!1},plotOptions:{columnrange:{minPointLength:10,dataLabels:{enabled:!0,formatter:function(){const t=this.point.options.installment,e=t.startDate.toDate(),i=t.endDate.toDate(),s=this.series.yAxis.categories[this.y];return this.series.yAxis.userOptions.labels.formatter({value:s===this.series.yAxis.categories[0]?e:s===this.series.yAxis.categories[this.series.yAxis.categories.length-1]?i:s})}}}},legend:{enabled:!1},series:[{name:"Prazo",data:[]}]})}ngOnInit(){this.watchFiltersChanges()}watchFiltersChanges(){this.filters.valueChanges.pipe(Object(l.a)(this.filters.value),Object(h.a)(o.a.debounceTime)).pipe(Object(u.a)(t=>{switch(t.periodType){case"months":default:return this.loadDataByMonths(t.period)}})).subscribe(t=>Object(r.a)(this,void 0,void 0,function*(){const e=t.map(t=>t.title),i=t.map(t=>{const e=t.applicableMonths.filter(t=>this.viewMonths.indexOf(t)>-1).sort(),i=e[0],s=e[e.length-1];return{low:this.viewMonths.findIndex(t=>t===i),high:this.viewMonths.findIndex(t=>t===s),name:t.title,installment:t}}),s=yield this.chart.ref$.toPromise();s.xAxis[0].setCategories(e),s.yAxis[0].setCategories(this.viewMonths),s.series[0].setData(i,!0)}))}loadDataByMonths(t){const e=c().add(-Math.ceil(t/2),"months");return this.viewMonths=new Array(t).fill("").map((t,i)=>(i>0&&e.add(1,"month"),e.format("YYYY-MM"))),this.authenticationService.auth.user.pipe(Object(u.a)(t=>this.installmentService.collection(e=>e.where("userId","==",t.uid).where("applicableMonths","array-contains-any",this.viewMonths)).valueChanges()))}}return t.\u0275fac=function(e){return new(e||t)(p.Ob(n.c),p.Ob(d.a),p.Ob(m.a))},t.\u0275cmp=p.Ib({type:t,selectors:[["fa-invoice-projection"]],decls:1,vars:1,consts:[[3,"chart"]],template:function(t,e){1&t&&p.Pb(0,"div",0),2&t&&p.lc("chart",e.chart)},directives:[a.b],styles:[""]}),t})(),b=(()=>{class t{}return t.\u0275mod=p.Mb({type:t}),t.\u0275inj=p.Lb({factory:function(e){return new(e||t)},imports:[[s.c,n.m,a.c]]}),t})();var y=i("tyNb");const v=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Ib({type:t,selectors:[["fa-home-page"]],decls:1,vars:0,template:function(t,e){1&t&&p.Pb(0,"fa-invoice-projection")},directives:[f],styles:[""]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=p.Mb({type:t}),t.\u0275inj=p.Lb({factory:function(e){return new(e||t)},imports:[[y.f.forChild(v)],y.f]}),t})(),g=(()=>{class t{}return t.\u0275mod=p.Mb({type:t}),t.\u0275inj=p.Lb({factory:function(e){return new(e||t)},imports:[[s.c,w,b]]}),t})()}}]);